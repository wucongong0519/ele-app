(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-617f6828"],{"1e08":function(t,o,s){"use strict";s.r(o);var a=function(){var t=this,o=t.$createElement,s=t._self._c||o;return t.showInfo?s("div",{staticClass:"goods"},[t._l(t.showInfo.recommend,function(o,a){return s("div",{key:a,staticClass:"recommend"},[s("p",{staticClass:"recommend-name"},[t._v(t._s(o.name))]),s("div",{staticClass:"recommend-wrap"},[s("ul",t._l(o.items,function(o,a){return s("li",{key:a},[s("img",{attrs:{src:o.image_path,alt:""}}),s("div",{staticClass:"recommend-food"},[s("p",{staticClass:"recommend-food-name"},[t._v(t._s(o.name))]),s("p",{staticClass:"recommend-food-zm"},[t._v("月售"+t._s(o.month_sales)+" 好评率"+t._s(o.satisfy_rate))])]),s("div",{staticClass:"recommend-food-price"},[s("p",[t._v("￥"+t._s(o.activity.fixed_price))]),s("CartControll",{attrs:{food:o}})],1)])}),0)])])}),s("div",{staticClass:"menuview"},[s("div",{ref:"menuScroll",staticClass:"menu-wrapper"},[s("ul",t._l(t.showInfo.menu,function(o,a){return s("li",{key:a,class:{current:t.currentIndex==a},on:{click:function(o){return t.selectMenu(a)}}},[o.icon_url?s("img",{attrs:{src:o.icon_url,alt:""}}):t._e(),s("span",[t._v(t._s(o.name))])])}),0)]),s("div",{ref:"foodScroll",staticClass:"foods-wrapper"},[s("ul",t._l(t.showInfo.menu,function(o,a){return s("li",{key:a,staticClass:"food-list-hook"},[s("div",{staticClass:"category-title"},[s("strong",[t._v(t._s(o.name))]),s("span",[t._v(t._s(o.description))])]),t._l(o.foods,function(o,a){return s("div",{key:a,staticClass:"fooddetails"},[s("img",{attrs:{src:o.image_path,alt:""}}),s("section",{staticClass:"fooddetails-info"},[s("h4",[t._v(t._s(o.name))]),s("p",{staticClass:"fooddetails-des"},[t._v(t._s(o.description))]),s("p",{staticClass:"fooddetails-sales"},[t._v("月售"+t._s(o.month_sales)+"分 好评率"+t._s(o.satisfy_rate))]),s("div",{staticClass:"fooddetails-price"},[s("span",{staticClass:"price"},[t._v("￥"+t._s(o.activity.fixed_price))]),s("CartControll",{attrs:{food:o}})],1)])])})],2)}),0)])]),s("ShopCart",{attrs:{shopInfo:t.showInfo}}),s("Food",{attrs:{food:t.selectFood,isShow:t.showFood},on:{close:t.close}})],2):t._e()},n=[],i=(s("ac6a"),function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"cartcontroll"},[t.food.count>0?s("span",{staticClass:"cartbutton button-minus",on:{click:function(o){return o.stopPropagation(),t.decreaseCount(o)}}},[s("i",{staticClass:"fa fa-minus"})]):t._e(),t.food.count>0?s("span",{staticClass:"cartcount"},[t._v(t._s(t.food.count))]):t._e(),s("span",{staticClass:"cartbutton",on:{click:function(o){return o.stopPropagation(),t.increaseCount(o)}}},[s("i",{staticClass:"fa fa-plus-circle"})])])}),c=[],e={name:"CartControll",data:function(){return{}},props:{food:Object},methods:{decreaseCount:function(){this.food.count--},increaseCount:function(){this.food.count++}}},r=e,l=(s("52c9"),s("2877")),f=Object(l["a"])(r,i,c,!1,null,"838dd61e",null),d=f.exports,u=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"shopcart"},[s("transition",{attrs:{name:"fade"}},[t.showCartView&&!t.isEmpty?s("div",{staticClass:"cartview-cartmask",on:{click:function(o){if(o.target!==o.currentTarget)return null;t.showCartView=!1}}},[s("div",{staticClass:"cartview-cartbody"},[s("div",{staticClass:"cartview-cartheader"},[s("span",[t._v("已选商品")]),s("button",{on:{click:t.clearFoods}},[s("i",{staticClass:"fa fa-trash-o"}),s("span",[t._v("清空")])])]),s("div",{staticClass:"entityList-cartbodyScroller"},[s("ul",{staticClass:"entityList-cartlist"},t._l(t.selectFoods,function(o,a){return s("li",{key:a,staticClass:"entityList-entityrow"},[s("h4",[s("span",[t._v(t._s(o.name))])]),s("span",{staticClass:"entityList-entitytotal"},[t._v(t._s(o.activity.fixed_price))]),s("CartControll",{attrs:{food:o}})],1)}),0)])])]):t._e()]),s("div",{staticClass:"bottomNav-cartfooter",class:{"bottomNav-carticon-empty":t.isEmpty}},[s("span",{staticClass:"bottomNav-carticon",on:{click:function(o){t.showCartView=!t.showCartView}}},[s("i",{staticClass:"fa fa-cart-plus"}),t.totalCount?s("span",[t._v(t._s(t.totalCount))]):t._e()]),s("div",{staticClass:"bottomNav-cartInfo",on:{click:function(o){t.showCartView=!t.showCartView}}},[s("p",{staticClass:"bottomNav-carttotal"},[t.isEmpty?s("span",[t._v("未选购商品")]):s("span",[t._v("¥"+t._s(t.totalPrice.toFixed(2)))])]),s("p",{staticClass:"bottomNav-cartdelivery"},[t._v("另需配送费"+t._s(t.shopInfo.rst.float_delivery_fee)+"元")])]),s("button",{staticClass:"submit-btn"},[t.isEmpty?s("span",[t._v("¥"+t._s(t.shopInfo.rst.float_minimum_order_amount)+"元起送")]):s("span",[t._v("去结算")])])])],1)},h=[],p={name:"ShopCart",data:function(){return{totalCount:0,totalPrice:0,selectFoods:[],showCartView:!1}},computed:{isEmpty:function(){var t=this,o=!0;return this.totalCount=0,this.totalPrice=0,this.selectFoods=[],this.shopInfo.recommend.forEach(function(s){s.items.forEach(function(s){s.count&&(o=!1,t.totalCount+=s.count,t.totalPrice+=s.activity.fixed_price*s.count,t.selectFoods.push(s))})}),this.shopInfo.menu.forEach(function(s){s.foods.forEach(function(s){s.count&&(o=!1,t.totalCount+=s.count,t.totalPrice+=s.activity.fixed_price*s.count,t.selectFoods.push(s))})}),o}},methods:{clearFoods:function(){this.shopInfo.recommend.forEach(function(t){t.items.forEach(function(t){t.count=0})}),this.shopInfo.menu.forEach(function(t){t.foods.forEach(function(t){t.count=0})})}},components:{CartControll:d},props:{shopInfo:Object}},m=p,_=(s("83e9"),Object(l["a"])(m,u,h,!1,null,"2463e1bf",null)),v=_.exports,C=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("transition",[s("div",{staticClass:"food"},[s("div",{staticClass:"foodpanel-close"},[s("img",{attrs:{src:"https://fuss10.elemecdn.com/8/ba/bcfa8cc62b20e044bd2ea1c1c7f3dpng.png?imageMogr/format/webp/",alt:""}})]),s("div",{staticClass:"foodpanel-body"},[s("div",{staticClass:"foodpanel-foodimg"},[s("img",{attrs:{src:t.food.image_path,alt:""}})]),s("div",{staticClass:"foodpanel-foodinfo"},[s("h4",[t._v(t._s(t.food.name))]),s("div",{staticClass:"foodpanel-foodsales"},[s("span",[t._v("月售"+t._s(t.food.month_sales))]),s("span",[t._v("好评率"+t._s(t.food.satisfy_rate)+"%")])]),s("div",{staticClass:"foodpanel-priceLine"},[s("span",[t._v("￥"+t._s(t.food.activity.fixed_price))]),s("CartControll",{attrs:{food:t.food}})],1),s("p",[t._v(t._s(t.food.description))])])])])])},w=[],g={name:"Food",props:{isShow:Boolean,food:Object}},b=g,y=(s("4a35"),Object(l["a"])(b,C,w,!1,null,"5898316b",null)),E=y.exports,k=s("1fba"),S={name:"Goods",data:function(){return{showInfo:null,menuScroll:{},foodScroll:{},scrollY:0,listHeight:[],selectFood:null,showFood:!1}},components:{CartControll:d,ShopCart:v,Food:E},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var o=this.listHeight[t],s=this.listHeight[t+1];if(this.scrollY>=o&&this.scrollY<=s)return t}return 0}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.$http("/api/profile/batch_shop").then(function(o){o.data.recommend.forEach(function(t){t.items.forEach(function(t){t.count=0})}),o.data.menu.forEach(function(t){t.foods.forEach(function(t){t.count=0})}),console.log(o),t.showInfo=o.data,t.$nextTick(function(){t.initScroll(),t.calcHeight()})})},initScroll:function(){var t=this;this.menuScroll=new k["a"](this.$refs.menuScroll,{click:!0}),this.foodScroll=new k["a"](this.$refs.foodScroll,{probeType:3,click:!0}),this.foodScroll.on("scroll",function(o){t.scrollY=Math.abs(Math.round(o.y))})},selectMenu:function(t){var o=this.$refs.foodScroll.getElementsByClassName("food-list-hook"),s=o[t];console.log(this.foodScroll),this.foodScroll.scrollToElement(s,250)},calcHeight:function(){var t=this.$refs.foodScroll.getElementsByClassName("food-list-hook");console.log(t);var o=0;this.listHeight.push(0);for(var s=0;s<t.length-1;s++)o+=t[s].clientHeight,this.listHeight.push(o);console.log(this.listHeight)},handleFood:function(t){this.showFood=!0,this.selectFood=E},close:function(){this.showFood=!1}}},F=S,I=(s("6b73"),Object(l["a"])(F,a,n,!1,null,"1aa34a81",null));o["default"]=I.exports},"4a35":function(t,o,s){"use strict";var a=s("7ac4"),n=s.n(a);n.a},"52c9":function(t,o,s){"use strict";var a=s("85c1"),n=s.n(a);n.a},"6b73":function(t,o,s){"use strict";var a=s("980d"),n=s.n(a);n.a},7317:function(t,o,s){},"7ac4":function(t,o,s){},"83e9":function(t,o,s){"use strict";var a=s("7317"),n=s.n(a);n.a},"85c1":function(t,o,s){},"980d":function(t,o,s){}}]);
//# sourceMappingURL=chunk-617f6828.c3e903e1.js.map